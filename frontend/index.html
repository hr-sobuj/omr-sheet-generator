<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OMR Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-10">
    <div class="max-w-lg mx-auto bg-white p-6 rounded-lg shadow-lg">
        <h1 class="text-2xl font-bold mb-4">OMR Sheet Generator</h1>

        <label class="block mb-2">Institute Name</label>
        <input id="institute" type="text" class="border p-2 w-full mb-4">

        <label class="block mb-2">Total Questions</label>
        <input id="questions" type="number" class="border p-2 w-full mb-4">

        <label class="block mb-2">Options per Question</label>
        <input id="options" type="number" class="border p-2 w-full mb-4">

        <button onclick="downloadOMR()" class="bg-blue-500 text-white px-4 py-2 rounded">
            Download OMR
        </button>
    </div>

    <script>
        async function downloadOMR() {
            const inst = document.getElementById('institute').value;
            const q = document.getElementById('questions').value;
            const opt = document.getElementById('options').value;

            const url = `/generate-omr?institute_name=${encodeURIComponent(inst)}&total_questions=${q}&options_per_question=${opt}`;

            const res = await fetch(url);
            const blob = await res.blob();

            const link = document.createElement('a');
            link.href = window.URL.createObjectURL(blob);
            link.download = "omr_sheet.pdf";
            link.click();
        }
    </script>
</body>
</html>
